{"ast":null,"code":"import _asyncToGenerator from\"/Users/omar/Documents/CF-AG/meet/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/omar/Documents/CF-AG/meet/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/omar/Documents/CF-AG/meet/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/omar/Documents/CF-AG/meet/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/omar/Documents/CF-AG/meet/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/Users/omar/Documents/CF-AG/meet/node_modules/@babel/runtime/regenerator/index.js\";import React,{Component}from'react';import'./App.css';import EventList from'./EventList';import CitySearch from'./CitySearch';import NumberOfEvents from'./NumberOfEvents';import{extractLocations,getEvents}from'./api';import'./nprogress.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={events:[],locations:[],numberOfEvents:32,currentLocation:'all'};_this.updateEvents=function(location,numberOfEvents){getEvents().then(function(events){var locationEvents=location==='all'?events:events.filter(function(event){return event.location===location;});_this.setState({events:locationEvents.slice(0,numberOfEvents),currentLocation:location});});};_this.updateNumberOfEvents=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var number;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:number=e.target.value;if(!(number>0&&number<33)){_context.next=7;break;}_context.next=4;return _this.setState({numberOfEvents:number});case 4:_this.updateEvents(_this.state.currentLocation,_this.state.numberOfEvents);_context.next=9;break;case 7:_context.next=9;return _this.setState({numberOfEvents:32});case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.mounted=true;getEvents().then(function(events){if(_this2.mounted){_this2.setState({events:events,locations:extractLocations(events)});}});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.mounted=false;}},{key:\"render\",value:function render(){console.log(this.state.events);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(CitySearch,{locations:this.state.locations,updateEvents:this.updateEvents}),/*#__PURE__*/_jsx(EventList,{events:this.state.events}),/*#__PURE__*/_jsx(NumberOfEvents,{numberOfEvents:this.state.numberOfEvents,updateNumberOfEvents:this.updateNumberOfEvents})]});}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/omar/Documents/CF-AG/meet/src/App.js"],"names":["React","Component","EventList","CitySearch","NumberOfEvents","extractLocations","getEvents","App","state","events","locations","numberOfEvents","currentLocation","updateEvents","location","then","locationEvents","filter","event","setState","slice","updateNumberOfEvents","e","number","target","value","mounted","console","log"],"mappings":"urBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,WAAP,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,OAASC,gBAAT,CAA2BC,SAA3B,KAA4C,OAA5C,CAEA,MAAO,iBAAP,C,2FAEMC,CAAAA,G,+SAGJC,K,CAAQ,CACNC,MAAM,CAAE,EADF,CAENC,SAAS,CAAE,EAFL,CAGNC,cAAc,CAAE,EAHV,CAINC,eAAe,CAAE,KAJX,C,OAORC,Y,CAAe,SAACC,QAAD,CAAWH,cAAX,CAA8B,CAC3CL,SAAS,GAAGS,IAAZ,CAAiB,SAACN,MAAD,CAAY,CAC3B,GAAMO,CAAAA,cAAc,CAAIF,QAAQ,GAAK,KAAd,CACrBL,MADqB,CAErBA,MAAM,CAACQ,MAAP,CAAc,SAACC,KAAD,QAAWA,CAAAA,KAAK,CAACJ,QAAN,GAAmBA,QAA9B,EAAd,CAFF,CAIA,MAAKK,QAAL,CAAc,CACZV,MAAM,CAAEO,cAAc,CAACI,KAAf,CAAqB,CAArB,CAAwBT,cAAxB,CADI,CAEZC,eAAe,CAAEE,QAFL,CAAd,EAID,CATD,EAUD,C,OAEDO,oB,0FAAuB,iBAAOC,CAAP,6HACfC,MADe,CACND,CAAC,CAACE,MAAF,CAASC,KADH,MAEjBF,MAAM,CAAG,CAAT,EAAcA,MAAM,CAAG,EAFN,gDAGb,OAAKJ,QAAL,CAAc,CAClBR,cAAc,CAAEY,MADE,CAAd,CAHa,QAMnB,MAAKV,YAAL,CAAkB,MAAKL,KAAL,CAAWI,eAA7B,CAA8C,MAAKJ,KAAL,CAAWG,cAAzD,EANmB,mDAQb,OAAKQ,QAAL,CAAc,CAClBR,cAAc,CAAE,EADE,CAAd,CARa,uD,8HAcvB,4BAAoB,iBAClB,KAAKe,OAAL,CAAe,IAAf,CACApB,SAAS,GAAGS,IAAZ,CAAiB,SAACN,MAAD,CAAY,CAC3B,GAAI,MAAI,CAACiB,OAAT,CAAkB,CAChB,MAAI,CAACP,QAAL,CAAc,CAAEV,MAAM,CAANA,MAAF,CAAUC,SAAS,CAAEL,gBAAgB,CAACI,MAAD,CAArC,CAAd,EACD,CACF,CAJD,EAKD,C,oCAED,+BAAsB,CACpB,KAAKiB,OAAL,CAAe,KAAf,CACD,C,sBAED,iBAAS,CACPC,OAAO,CAACC,GAAR,CAAY,KAAKpB,KAAL,CAAWC,MAAvB,EACA,mBACE,aAAK,SAAS,CAAC,KAAf,wBACE,KAAC,UAAD,EAAY,SAAS,CAAE,KAAKD,KAAL,CAAWE,SAAlC,CAA6C,YAAY,CAAE,KAAKG,YAAhE,EADF,cAEE,KAAC,SAAD,EAAW,MAAM,CAAE,KAAKL,KAAL,CAAWC,MAA9B,EAFF,cAGE,KAAC,cAAD,EAAgB,cAAc,CAAE,KAAKD,KAAL,CAAWG,cAA3C,CAA2D,oBAAoB,CAAE,KAAKU,oBAAtF,EAHF,GADF,CAOD,C,iBA3DepB,S,EA8DlB,cAAeM,CAAAA,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport EventList from './EventList';\nimport CitySearch from './CitySearch';\nimport NumberOfEvents from './NumberOfEvents';\nimport { extractLocations, getEvents } from './api';\n\nimport './nprogress.css';\n\nclass App extends Component {\n\n\n  state = {\n    events: [],\n    locations: [],\n    numberOfEvents: 32,\n    currentLocation: 'all'    \n  }\n\n  updateEvents = (location, numberOfEvents) => {\n    getEvents().then((events) => {\n      const locationEvents = (location === 'all') ?\n        events :\n        events.filter((event) => event.location === location);\n      \n      this.setState({\n        events: locationEvents.slice(0, numberOfEvents),\n        currentLocation: location\n      });\n    });\n  }\n\n  updateNumberOfEvents = async (e) => {\n    const number = e.target.value;\n    if (number > 0 && number < 33) {\n      await this.setState({\n        numberOfEvents: number,\n      });\n      this.updateEvents(this.state.currentLocation, this.state.numberOfEvents);\n    } else {\n      await this.setState({\n        numberOfEvents: 32\n      });\n    }\n  }  \n\n  componentDidMount() {\n    this.mounted = true;\n    getEvents().then((events) => {\n      if (this.mounted) {\n        this.setState({ events, locations: extractLocations(events) });\n      }\n    });\n  }\n\n  componentWillUnmount(){\n    this.mounted = false;\n  }\n\n  render() {\n    console.log(this.state.events);\n    return (\n      <div className=\"App\">\n        <CitySearch locations={this.state.locations} updateEvents={this.updateEvents} />\n        <EventList events={this.state.events} />\n        <NumberOfEvents numberOfEvents={this.state.numberOfEvents} updateNumberOfEvents={this.updateNumberOfEvents} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}